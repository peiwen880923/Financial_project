{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      products: [{\n        id: 20200805001,\n        productname: '珍奶',\n        price: 100,\n        rate: 0.01,\n        account: 1111999666,\n        quantity: 3\n      }, {\n        id: 20200805002,\n        productname: '雞排',\n        price: 300,\n        rate: 0.02,\n        account: 1111999777,\n        quantity: 5\n      }],\n      tempProduct: {} //暫存區\n    };\n  },\n\n  methods: {\n    //把暫存資料存回原本物件或新建資料\n    saveProduct() {\n      let vm = this;\n      if (vm.tempProduct.id) {\n        //覆蓋原有資料\n        const id = vm.tempProduct.id;\n        vm.products.forEach((item, i) => {\n          if (item.id === id) {\n            vm.products[i] = vm.tempProduct;\n          }\n        });\n      } else {\n        //新建資料\n        const id = new Date().getTime();\n        vm.tempProduct.id = id;\n        vm.products.push(vm.tempProduct);\n      }\n      vm.tempProduct = {};\n      $('#productModal').modal('hide');\n    },\n    //開啟視窗\n    openModal(product, item) {\n      let vm = this;\n      switch (product) {\n        //新增\n        case 'new':\n          vm.tempProduct = {};\n          $('#productModal').modal('show');\n          break;\n        //編輯\n        case 'edit':\n          vm.tempProduct = Object.assign({}, item);\n          // 物件淺拷貝，把資料做拷貝到空物件，不要動到原本的\n          $('#productModal').modal('show');\n          break;\n        //刪除\n        case 'delete':\n          vm.tempProduct = Object.assign({}, item);\n          $('#delProductModal').modal('show');\n          break;\n        default:\n          break;\n      }\n    },\n    //刪除資料\n    delProduct() {\n      let vm = this;\n      if (vm.tempProduct.id) {\n        const id = vm.tempProduct.id;\n        vm.products.forEach((item, i) => {\n          if (item.id === id) {\n            vm.products.splice(i, 1);\n            vm.tempProduct = {};\n          }\n        });\n      }\n      $('#delProductModal').modal('hide');\n    }\n  }\n};","map":{"version":3,"names":["data","products","id","productname","price","rate","account","quantity","tempProduct","methods","saveProduct","vm","forEach","item","i","Date","getTime","push","$","modal","openModal","product","Object","assign","delProduct","splice"],"sources":["C:\\Users\\User\\Documents\\GitHub\\test\\test\\src\\views\\TestView.vue"],"sourcesContent":["<script>\r\nexport default{\r\ndata() {return{\r\n    products: [\r\n        {\r\n            id: 20200805001,\r\n            productname: '珍奶',\r\n            price: 100,\r\n            rate: 0.01,\r\n            account: 1111999666,\r\n            quantity: 3,\r\n        },\r\n        {\r\n            id: 20200805002,\r\n            productname: '雞排',\r\n            price: 300,\r\n            rate: 0.02,\r\n            account: 1111999777,\r\n            quantity: 5,\r\n        },\r\n],\r\n    tempProduct: {}, //暫存區\r\n    \r\n}},\r\nmethods: {\r\n    //把暫存資料存回原本物件或新建資料\r\n    saveProduct() {\r\n        let vm = this;\r\n        if (vm.tempProduct.id) {    //覆蓋原有資料\r\n            const id = vm.tempProduct.id;\r\n            vm.products.forEach((item, i) => {\r\n                if (item.id === id) {\r\n                    vm.products[i] = vm.tempProduct;\r\n                }\r\n            });\r\n        } \r\n        else {  //新建資料\r\n            const id = new Date().getTime();\r\n            vm.tempProduct.id = id;\r\n            vm.products.push(vm.tempProduct);\r\n        }\r\n        vm.tempProduct = {};\r\n        $('#productModal').modal('hide');\r\n    },\r\n\r\n    //開啟視窗\r\n    openModal(product, item) {\r\n        let vm = this;\r\n        switch (product) {\r\n            //新增\r\n            case 'new':\r\n                vm.tempProduct = {};\r\n                $('#productModal').modal('show');\r\n                break;\r\n            //編輯\r\n            case 'edit':\r\n                vm.tempProduct = Object.assign({}, item); \r\n                // 物件淺拷貝，把資料做拷貝到空物件，不要動到原本的\r\n                $('#productModal').modal('show');\r\n                break;\r\n            //刪除\r\n            case 'delete':\r\n                vm.tempProduct = Object.assign({}, item);\r\n                $('#delProductModal').modal('show');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    //刪除資料\r\n    delProduct() {\r\n        let vm = this;\r\n        if (vm.tempProduct.id) {\r\n            const id = vm.tempProduct.id;\r\n            vm.products.forEach((item, i) => {\r\n                if (item.id === id) {\r\n                    vm.products.splice(i, 1);\r\n                    vm.tempProduct = {};\r\n                }\r\n            });\r\n        }\r\n        $('#delProductModal').modal('hide');\r\n\r\n    },\r\n\r\n},\r\n\r\n\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div id=\"app\" class=\"container mt-3\">\r\n        <div>\r\n            <div class=\"text-right mt-4\">\r\n                <button class=\"btn btn-primary\" @click=\"openModal('new')\">\r\n                    新增產品\r\n                </button>\r\n            </div>\r\n            <table class=\"table mt-4\">\r\n                <thead>\r\n                    <tr>\r\n                        <th width=\"15%\">產品名稱</th>\r\n                        <th width=\"10%\">產品價格</th>\r\n                        <th width=\"10%\">手機費率</th>\r\n                        <th width=\"10%\">扣款帳號</th>\r\n                        <th width=\"15%\">購買數量</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(item) in products\" :key=\"item.id\">\r\n                        <td>{{ item.productname }}</td>\r\n                        <td>{{ item.price }}</td>\r\n                        <td>{{ item.rate }}</td>\r\n                        <td>{{ item.account }}</td>\r\n                        <td>{{ item.quantity }}</td>\r\n                        <td>\r\n                            <div class=\"btn-group\">\r\n                                <button class=\"btn btn-outline-primary btn-sm mr-2\"\r\n                                    @click=\"openModal('edit' , item)\">編輯</button>\r\n                                <button class=\"btn btn-outline-danger btn-sm\"\r\n                                    @click=\"openModal('delete' , item)\">刪除</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <!-- Modal -->\r\n            <div id=\"productModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" \r\n              aria-labelledby=\"exampleModalLabel\"\r\n                aria-hidden=\"true\">\r\n                <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n                    <div class=\"modal-content border-0\">\r\n\r\n                        <div class=\"modal-header bg-dark text-white\">\r\n                            <h5 id=\"exampleModalLabel\" class=\"modal-title\">\r\n                                <span>新增產品</span>\r\n                            </h5>\r\n                            <!-- 關閉按鈕-->\r\n                            <button type=\"button\" class=\"close\" \r\n                              data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">×</span>\r\n                            </button>\r\n                        </div>\r\n                        <!--modal-header END -->\r\n                        <div class=\"modal-body\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-sm-8\">\r\n                                    <div class=\"form-row\">\r\n                                        <div class=\"form-group col-md-6\">\r\n                                            <label for=\"productname\">產品名稱</label>\r\n                                            <input id=\"productname\" \r\n                                             v-model=\"tempProduct.productname\" type=\"text\"\r\n                                             class=\"form-control\" placeholder=\"請輸入產品名稱\">\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-row\">\r\n                                        <div class=\"form-group col-md-6\">\r\n                                            <label for=\"price\">價格</label>\r\n                                            <input id=\"price\" \r\n                                             v-model=\"tempProduct.price\" type=\"text\"\r\n                                             class=\"form-control\" placeholder=\"請輸入產品價格\">\r\n                                        </div>\r\n                                        <div class=\"form-group col-md-6\">\r\n                                            <label for=\"rate\">手續費率</label>\r\n                                            <input id=\"rate\" \r\n                                             v-model=\"tempProduct.rate\" type=\"text\"\r\n                                             class=\"form-control\" placeholder=\"請輸入手續費率\">\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-group\">\r\n                                        <label for=\"account\">扣款帳號</label>\r\n                                        <input id=\"account\" \r\n                                          v-model=\"tempProduct.account\" type=\"text\"\r\n                                          class=\"form-control\" placeholder=\"請輸入扣款帳號\">\r\n                                    </div>\r\n                                    <div class=\"form-group\">\r\n                                        <label for=\"quantity\">購買數量</label>\r\n                                        <input id=\"quantity\" \r\n                                         v-model=\"tempProduct.quantity\" type=\"text\"\r\n                                         class=\"form-control\" placeholder=\"請輸入購買數量\">\r\n                                    </div>\r\n                                    <div class=\"form-group\">\r\n                                        <div class=\"form-check\">\r\n                                            <input type=\"checkbox\" id=\"is_enabled\" \r\n                                             v-model=\"tempProduct.is_enabled\"\r\n                                             class=\"form-check-input\" :true-value=\"1\" \r\n                                             :flase-value=\"0\">\r\n                                            <label for=\"is_enabled\" class=\"form-check-label\">\r\n                                            是否啟用</label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button class=\"btn btn-outline-secondary\" type=\"button\" \r\n                              data-dismiss=\"modal\">取消</button>\r\n                            <button class=\"btn btn-primary\" type=\"button\" @click=\"saveProduct\">\r\n                             確認</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"delProductModal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" \r\n             aria-labelledby=\"exampleModalLabel\"\r\n                aria-hidden=\"true\">\r\n                <div class=\"modal-dialog\" role=\"document\">\r\n                    <div class=\"modal-content border-0\">\r\n                        <div class=\"modal-header bg-danger text-white\">\r\n                            <h5 id=\"exampleModalLabel\" class=\"modal-title\">\r\n                                <span>刪除產品</span>\r\n                            </h5>\r\n                            <!-- 關閉按鈕-->\r\n                            <button type=\"button\" class=\"close\" \r\n                            data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">×</span>\r\n                            </button>\r\n                        </div>\r\n                        <!--modal-header END -->\r\n\r\n                        <div class=\"modal-body\">\r\n                        是否刪除 <strong class=\"text-danger\">{{ tempProduct.title }}</strong>\r\n                        商品(刪除後將無法恢復)。\r\n                        </div>\r\n                        <!--modal-bady END -->\r\n\r\n                        <div class=\"modal-footer\">\r\n                            <button class=\"btn btn-outline-secondary\" \r\n                            type=\"button\" data-dismiss=\"modal\">取消</button>\r\n                            <button class=\"btn btn-danger\" type=\"button\" @click=\"delProduct\">\r\n                            確認刪除</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}